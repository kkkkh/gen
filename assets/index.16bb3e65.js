var U=Object.defineProperty,q=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var _=(d,n,e)=>n in d?U(d,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[n]=e,C=(d,n)=>{for(var e in n||(n={}))T.call(n,e)&&_(d,e,n[e]);if(V)for(var e of V(n))P.call(n,e)&&_(d,e,n[e]);return d},v=(d,n)=>q(d,L(n));import{d as h,r as j,v as O,a as c,o as A,t as W,w as p,u,f as s,c as D,B as G,F as H,g as F}from"./vendor.d9d12e3b.js";const J=F("gen Var"),K=F("gen Var"),M={name:"gen-form"},Y=h(v(C({},M),{setup(d){const n=j(),e=O({varCode:"",varCodeValue:"",fieldCode:"",fieldCodeValue:"",apiAlias:"result"}),R={varCode:[{required:!0,message:"\u8BF7\u8F93\u5165var-code",trigger:"blur"}],fieldCode:[{required:!0,message:"\u8BF7\u8F93\u5165field-code",trigger:"blur"}]},b=[{label:"result",value:"result"}],S=()=>{n.value.validateField("varCode",o=>{if(o===""){const a=e.varCode,l=$(a);e.varCodeValue=x(a,l)}})},$=o=>{let a="query/mutation";const t=/extend\stype\s([a-zA-Z]+)\s/.exec(o);return t&&(a=t[1].toLocaleLowerCase()),a},x=(o,a)=>y(o).map(t=>`${a} ${t}`).join(`
`),y=o=>{const l=/{([\s\S]+)}/.exec(o);if(l){const t=l[1],m=/\s*[\n\r]\s*/,f=t.split(m),i=/^#/;return f.filter(r=>!i.test(r)&&r!=="").map(r=>{const Z=w(r),N=k(r);return B(Z,N)})}else return[]},B=(o,{paramsVar:a,paramsValue:l})=>`${o}${a}{
        ${e.apiAlias}:${o}${l}{
            
        }
    }`,w=o=>{const l=/([a-zA-Z]+)\s*\(/.exec(o);return l?l[1]:(console.log(new Error("\u672A\u627E\u5230Api Name")),"")},k=o=>{const l=/\([\s\S]+\)/.exec(o),t={paramsVar:"",paramsValue:""};return l&&(t.paramsVar=l[0].replace(/([a-zA-Z]+:)/g,"$$$1"),t.paramsValue=l[0].replace(/([a-zA-Z]+)(:\s*)([a-zA-Z]+!?)(,?)/g,"$1$2$$$1$4")),t},z=()=>{n.value.validateField("fieldCode",o=>{if(o===""){const a=e.fieldCode;e.fieldCodeValue=E(a)}})},E=o=>{const a=/:\s*[a-zA-Z]+!?/g,t=/({[\s\S]+})/.exec(o.replace(a,""));return t?t[1]:""};return(o,a)=>{const l=c("el-input"),t=c("el-form-item"),m=c("el-option"),f=c("el-select"),i=c("el-button"),g=c("el-form");return A(),W(g,{ref_key:"genElForm",ref:n,model:u(e),rules:R,"label-width":"100px",class:"gen-form"},{default:p(()=>[s(t,{label:"var-code",prop:"varCode"},{default:p(()=>[s(l,{type:"textarea",rows:6,modelValue:u(e).varCode,"onUpdate:modelValue":a[0]||(a[0]=r=>u(e).varCode=r),placeholder:"\u8BF7\u8F93\u5165var-code",clearable:""},null,8,["modelValue"])]),_:1}),s(t,{label:"apiAlias",prop:"apiAlias"},{default:p(()=>[s(f,{modelValue:u(e).apiAlias,"onUpdate:modelValue":a[1]||(a[1]=r=>u(e).apiAlias=r),placeholder:"\u8BF7\u9009\u62E9apiAlias",clearable:""},{default:p(()=>[(A(),D(H,null,G(b,r=>s(m,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),s(i,{class:"ml-2",onClick:S},{default:p(()=>[J]),_:1})]),_:1}),s(t,{prop:"varCodeValue"},{default:p(()=>[s(l,{type:"textarea",rows:6,modelValue:u(e).varCodeValue,"onUpdate:modelValue":a[2]||(a[2]=r=>u(e).varCodeValue=r),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),s(t,{label:"field-code",prop:"fieldCode"},{default:p(()=>[s(l,{type:"textarea",rows:6,modelValue:u(e).fieldCode,"onUpdate:modelValue":a[3]||(a[3]=r=>u(e).fieldCode=r),placeholder:"\u8BF7\u8F93\u5165field-code",clearable:""},null,8,["modelValue"])]),_:1}),s(t,null,{default:p(()=>[s(i,{onClick:z},{default:p(()=>[K]),_:1})]),_:1}),s(t,{prop:"fieldCodeValue"},{default:p(()=>[s(l,{type:"textarea",rows:6,modelValue:u(e).fieldCodeValue,"onUpdate:modelValue":a[4]||(a[4]=r=>u(e).fieldCodeValue=r),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}}));export{Y as default};
