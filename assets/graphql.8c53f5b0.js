var N=Object.defineProperty,U=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var _=(u,n,e)=>n in u?N(u,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[n]=e,C=(u,n)=>{for(var e in n||(n={}))L.call(n,e)&&_(u,e,n[e]);if(V)for(var e of V(n))T.call(n,e)&&_(u,e,n[e]);return u},v=(u,n)=>U(u,q(n));import{d as P,r as j,t as O,a as c,o as A,s as W,w as p,u as d,f as s,c as D,x as G,F as H,g as F}from"./vendor.a7f755f2.js";const J=F("gen Var"),K=F("gen Var"),M={name:"gen-form"},Y=P(v(C({},M),{setup(u){const n=j(),e=O({varCode:"",varCodeValue:"",fieldCode:"",fieldCodeValue:"",apiAlias:"data"}),R={varCode:[{required:!0,message:"\u8BF7\u8F93\u5165var-code",trigger:"blur"}],fieldCode:[{required:!0,message:"\u8BF7\u8F93\u5165field-code",trigger:"blur"}]},x=[{label:"data",value:"data"}],b=()=>{n.value.validateField("varCode",o=>{if(o===""){const a=e.varCode,l=$(a);e.varCodeValue=S(a,l)}})},$=o=>{let a="query/mutation";const t=/extend\stype\s([a-zA-Z]+)\s/.exec(o);return t&&(a=t[1].toLocaleLowerCase()),a},S=(o,a)=>{const l=y(o);debugger;return l.map(t=>`${a} ${t}`).join(`
`)},y=o=>{const l=/{([\s\S]+)}/.exec(o);if(l){const t=l[1],m=/\s*[\n\r]\s*/,f=t.split(m),i=/^#/;return f.filter(r=>!i.test(r)&&r!=="").map(r=>{debugger;const Z=w(r),h=k(r);return B(Z,h)})}else return[]},B=(o,{paramsVar:a,paramsValue:l})=>`${o}${a}{
        ${e.apiAlias}:${o}${l}{
            
        }
    }`,w=o=>{const l=/([a-zA-Z]+)\s*\(/.exec(o);return l?l[1]:(console.log(new Error("\u672A\u627E\u5230Api Name")),"")},k=o=>{const l=/\([\s\S]+\)/.exec(o),t={paramsVar:"",paramsValue:""};return l&&(t.paramsVar=l[0].replace(/([a-zA-Z]+:)/g,"$$$1"),t.paramsValue=l[0].replace(/([a-zA-Z]+)(:\s*)([a-zA-Z]+!?)(,?)/g,"$1$2$$$1$4")),t},z=()=>{n.value.validateField("fieldCode",o=>{if(o===""){const a=e.fieldCode;e.fieldCodeValue=E(a)}})},E=o=>{const a=/:\s*[a-zA-Z]+!?/g,t=/({[\s\S]+})/.exec(o.replace(a,""));return t?t[1]:""};return(o,a)=>{const l=c("el-input"),t=c("el-form-item"),m=c("el-option"),f=c("el-select"),i=c("el-button"),g=c("el-form");return A(),W(g,{ref_key:"genElForm",ref:n,model:d(e),rules:R,"label-width":"100px",class:"gen-form"},{default:p(()=>[s(t,{label:"var-code",prop:"varCode"},{default:p(()=>[s(l,{type:"textarea",rows:6,modelValue:d(e).varCode,"onUpdate:modelValue":a[0]||(a[0]=r=>d(e).varCode=r),placeholder:"\u8BF7\u8F93\u5165var-code",clearable:"",maxlength:1e3},null,8,["modelValue"])]),_:1}),s(t,{label:"apiAlias",prop:"apiAlias"},{default:p(()=>[s(f,{modelValue:d(e).apiAlias,"onUpdate:modelValue":a[1]||(a[1]=r=>d(e).apiAlias=r),placeholder:"\u8BF7\u9009\u62E9apiAlias",clearable:""},{default:p(()=>[(A(),D(H,null,G(x,r=>s(m,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),s(i,{class:"ml-2",onClick:b},{default:p(()=>[J]),_:1})]),_:1}),s(t,{prop:"varCodeValue"},{default:p(()=>[s(l,{type:"textarea",rows:6,modelValue:d(e).varCodeValue,"onUpdate:modelValue":a[2]||(a[2]=r=>d(e).varCodeValue=r),placeholder:"\u8BF7\u8F93\u5165",clearable:"",maxlength:1e3},null,8,["modelValue"])]),_:1}),s(t,{label:"field-code",prop:"fieldCode"},{default:p(()=>[s(l,{type:"textarea",rows:6,modelValue:d(e).fieldCode,"onUpdate:modelValue":a[3]||(a[3]=r=>d(e).fieldCode=r),placeholder:"\u8BF7\u8F93\u5165field-code",clearable:"",maxlength:1e3},null,8,["modelValue"])]),_:1}),s(t,null,{default:p(()=>[s(i,{onClick:z},{default:p(()=>[K]),_:1})]),_:1}),s(t,{prop:"fieldCodeValue"},{default:p(()=>[s(l,{type:"textarea",rows:6,modelValue:d(e).fieldCodeValue,"onUpdate:modelValue":a[4]||(a[4]=r=>d(e).fieldCodeValue=r),placeholder:"\u8BF7\u8F93\u5165",clearable:"",maxlength:1e3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}}));export{Y as default};
