var U=Object.defineProperty,q=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var _=(d,n,e)=>n in d?U(d,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[n]=e,C=(d,n)=>{for(var e in n||(n={}))T.call(n,e)&&_(d,e,n[e]);if(V)for(var e of V(n))P.call(n,e)&&_(d,e,n[e]);return d},v=(d,n)=>q(d,L(n));import{d as h,r as j,v as O,a as c,o as A,t as W,w as p,u,f as s,c as D,z as G,F as H,g as F}from"./vendor.b90d10d6.js";const J=F("gen Var"),K=F("gen Var"),M={name:"gen-form"},Y=h(v(C({},M),{setup(d){const n=j(),e=O({varCode:"",varCodeValue:"",fieldCode:"",fieldCodeValue:"",apiAlias:"result"}),R={varCode:[{required:!0,message:"\u8BF7\u8F93\u5165var-code",trigger:"blur"}],fieldCode:[{required:!0,message:"\u8BF7\u8F93\u5165field-code",trigger:"blur"}]},b=[{label:"result",value:"result"}],$=()=>{n.value.validateField("varCode",o=>{if(o===""){const l=e.varCode,a=x(l);e.varCodeValue=S(l,a)}})},x=o=>{let l="query/mutation";const t=/extend\stype\s([a-zA-Z]+)\s/.exec(o);return t&&(l=t[1].toLocaleLowerCase()),l},S=(o,l)=>{const a=y(o);debugger;return a.map(t=>`${l} ${t}`).join(`
`)},y=o=>{const a=/{([\s\S]+)}/.exec(o);if(a){const t=a[1],m=/\s*[\n\r]\s*/,f=t.split(m),i=/^#/;return f.filter(r=>!i.test(r)&&r!=="").map(r=>{debugger;const Z=w(r),N=k(r);return B(Z,N)})}else return[]},B=(o,{paramsVar:l,paramsValue:a})=>`${o}${l}{
        ${e.apiAlias}:${o}${a}{
            
        }
    }`,w=o=>{const a=/([a-zA-Z]+)\s*\(/.exec(o);return a?a[1]:(console.log(new Error("\u672A\u627E\u5230Api Name")),"")},k=o=>{const a=/\([\s\S]+\)/.exec(o),t={paramsVar:"",paramsValue:""};return a&&(t.paramsVar=a[0].replace(/([a-zA-Z]+:)/g,"$$$1"),t.paramsValue=a[0].replace(/([a-zA-Z]+)(:\s*)([a-zA-Z]+!?)(,?)/g,"$1$2$$$1$4")),t},z=()=>{n.value.validateField("fieldCode",o=>{if(o===""){const l=e.fieldCode;e.fieldCodeValue=E(l)}})},E=o=>{const l=/:\s*[a-zA-Z]+!?/g,t=/({[\s\S]+})/.exec(o.replace(l,""));return t?t[1]:""};return(o,l)=>{const a=c("el-input"),t=c("el-form-item"),m=c("el-option"),f=c("el-select"),i=c("el-button"),g=c("el-form");return A(),W(g,{ref_key:"genElForm",ref:n,model:u(e),rules:R,"label-width":"100px",class:"gen-form"},{default:p(()=>[s(t,{label:"var-code",prop:"varCode"},{default:p(()=>[s(a,{type:"textarea",rows:6,modelValue:u(e).varCode,"onUpdate:modelValue":l[0]||(l[0]=r=>u(e).varCode=r),placeholder:"\u8BF7\u8F93\u5165var-code",clearable:""},null,8,["modelValue"])]),_:1}),s(t,{label:"apiAlias",prop:"apiAlias"},{default:p(()=>[s(f,{modelValue:u(e).apiAlias,"onUpdate:modelValue":l[1]||(l[1]=r=>u(e).apiAlias=r),placeholder:"\u8BF7\u9009\u62E9apiAlias",clearable:""},{default:p(()=>[(A(),D(H,null,G(b,r=>s(m,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),s(i,{class:"ml-2",onClick:$},{default:p(()=>[J]),_:1})]),_:1}),s(t,{prop:"varCodeValue"},{default:p(()=>[s(a,{type:"textarea",rows:6,modelValue:u(e).varCodeValue,"onUpdate:modelValue":l[2]||(l[2]=r=>u(e).varCodeValue=r),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),s(t,{label:"field-code",prop:"fieldCode"},{default:p(()=>[s(a,{type:"textarea",rows:6,modelValue:u(e).fieldCode,"onUpdate:modelValue":l[3]||(l[3]=r=>u(e).fieldCode=r),placeholder:"\u8BF7\u8F93\u5165field-code",clearable:""},null,8,["modelValue"])]),_:1}),s(t,null,{default:p(()=>[s(i,{onClick:z},{default:p(()=>[K]),_:1})]),_:1}),s(t,{prop:"fieldCodeValue"},{default:p(()=>[s(a,{type:"textarea",rows:6,modelValue:u(e).fieldCodeValue,"onUpdate:modelValue":l[4]||(l[4]=r=>u(e).fieldCodeValue=r),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}}));export{Y as default};
